version: '3.1'

services:
  # --- poke ---
  poke:
    container_name: poke_container
    hostname: poke
    restart: always
    build:
      context: poke
      args:
        - PASSWORD=$PASSWORD_10000
    volumes:
      - ../receiver/flags/poke.txt:/flag.txt:ro
      - ../utils/bashrc:/root/.bashrc:ro
      - ../utils/preexec.sh:/root/.preexec.sh:ro
    ports:
      - "10000:80"
      - "10022:22"
    extra_hosts:
      - "host.docker.internal:host-gateway"
  # --- poke ---

  # --- niko ---
  niko:
    container_name: niko_container
    hostname: niko
    restart: always
    build:
      context: niko
      args:
        - PASSWORD=$PASSWORD_15000
    volumes:
      - ../receiver/flags/niko.txt:/flag.txt:ro
      - ../utils/bashrc:/root/.bashrc:ro
      - ../utils/preexec.sh:/root/.preexec.sh:ro
    ports:
      - "15000:8000"
      - "15022:22"
    extra_hosts:
      - "host.docker.internal:host-gateway"
  # --- niko ---